<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>飛灣鐵路公司｜Flywan Railway Company</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header class="site-header">
  <div class="container navbar">
    <div class="brand">
      <span class="brand-subtitle">FLYWAN RAILWAY COMPANY</span>
      <span class="brand-title">飛灣鐵路公司</span>
    </div>
    <nav class="nav-links">
      <a href="index.html" class="active">首頁</a>
      <a href="news.html">公告資訊</a>
      <a href="stations.html">車站資訊</a>
      <a href="timetable.html">時刻表</a>
      <a href="tickets.html">票務資訊</a>
      <a href="company.html">公司介紹</a>
      <a href="extras.html">其他資料</a>
      <a href="contact.html">聯絡我們</a>
    </nav>
  </div>
</header>

<main class="container">

  <section class="hero">
    <div>
      <div class="hero-sub">FR｜鐵路公司官網</div>
      <h1 class="hero-title">飛灣鐵路公司</h1>
      <p class="hero-lead">
        飛灣鐵路：城市脈動<br>
        連結飛灣每一段日常與冒險旅程。<br>
        從都會商圈、學區、機場，皆可搭乘本公司列車抵達。
      </p>
      <div class="hero-actions">
        <a href="timetable.html" class="btn btn-primary">查看時刻表 →</a>
        <a href="stations.html" class="btn btn-outline">查詢車站資訊</a>
      </div>
    </div>
    <aside class="hero-panel">
      <div class="hero-panel-title">即時服務狀態 Service Status</div>
      <ul class="hero-panel-list">
        <li><span class="hero-label">FR-飛灣快線</span><span class="status-chip status-normal">正常運轉</span></li>
        <li><span class="hero-label">ART-綾京線</span><span class="status-chip status-normal">正常運轉</span></li>
        <li><span class="hero-label">BRT-恆夏線</span><span class="status-chip status-normal">正常運轉</span></li>
        <li><span class="hero-label">WRT-環島線</span><span class="status-chip status-normal">正常運轉</span></li>
      </ul>
    </aside>
  </section>

  <section>
    <h2>最新活動 News &amp; Events</h2>
    <div class="grid grid-2" id="auto-news-container">
      <article class="card">
        <small class="meta">載入中...</small>
        <h3>系統連線中</h3>
        <p>正在取得最新的活動資訊...</p>
      </article>
    </div>
  </section>

  <section>
    <h2>沿線景點推薦 Featured Destinations</h2>
    <div class="grid grid-3">
      <article class="card">
        <h3>FR04 飛灣郵輪港</h3>
        <p>利用舊港區改建而成的超大型濱海購物城，也是飛灣市面向海洋的門戶。</p>
        <p class="meta">推薦客群：國際旅客、精品愛好者</p>
      </article>
      <article class="card">
        <h3>FR09 科創園</h3>
        <p>外觀如同一顆巨大銀色水滴的建築，是飛灣市展現高科技實力的窗口。</p>
        <p class="meta">推薦客群：科技迷、親子遊客</p>
      </article>
      <article class="card">
        <h3>FR12 飛灣公園</h3>
        <p>夾在繁忙都會與機場之間一塊被保留下來的長條形綠帶。週末常舉辦草地音樂節。</p>
        <p class="meta">推薦客群：文青、運動愛好者</p>
      </article>
    </div>
  </section>

  <section>
    <h2>公司簡介 About Flywan Railway</h2>
    <p>
      響應 2025 年《海岸景觀復育法》與《綠色縫合計畫》，我們毅然拆除切割海岸與城市的傳統重軌，將珍貴的空間歸還給濕地與寧靜。
    </p>
    <a href="company.html" class="btn btn-outline">瞭解更多公司介紹</a>
  </section>

</main>

<footer class="site-footer">
  <div class="container">
    <p>本網站及「飛灣鐵路公司」為虛構設定，僅供娛樂與創作使用。</p>
  </div>
</footer>

<script>
(function() {
  // === 設定區 ===
  const UPDATE_INTERVAL_DAYS = 5; // 每5天更新一次
  const NEWS_COUNT = 2; // 首頁顯示 2 則

  // === 資料庫 (精簡版，專注於活動與生活) ===
  const DB = {
    stations: ['飛灣公園', '飛灣郵輪港', '市民廣場', '海莊遊樂園', '科創園', '飛灣新站', '碼頭', '文化中心'],
    activities: ['市集', '音樂節', '路跑', '展覽', '煙火', '美食展', '打卡活動', '野餐日', '藝術季', '快閃店', '親子日'],
    templates: {
      titles: [
        "週末去哪玩？{S} {T} 成為話題焦點",
        "熱情登場：{S} {T} 邀請您共襄盛舉",
        "打卡熱點！{S} {T} 讓網友瘋傳",
        "探索飛灣：{S} 舉辦年度 {T}",
        "最新情報：{S} {T} 本週開跑"
      ],
      bodies: [
        "最近在社群媒體上爆紅的，竟然是 **{S}**！原來是這裡的「{T}」吸引了大批民眾朝聖。放假不知道去哪裡？飛灣鐵路推薦您前往體驗。",
        "這週末 **{S}** 將舉辦盛大的「{T}」，現場預計會有豐富的攤位與表演。搭乘飛灣快線前往，既環保又方便，千萬別錯過。",
        "為了活化在地觀光，**{S}** 特別推出了「{T}」活動。實際走訪現場，氣氛非常熱鬧，非常適合闔家光臨或情侶約會。",
        "網友熱議的「{T}」就在 **{S}**！飛灣鐵路提醒您，活動期間人潮眾多，請多利用大眾運輸工具前往，享受輕鬆的假期。"
      ]
    }
  };

  // === 偽隨機數產生器 (Seeded Random) ===
  // 這是讓兩個頁面、不同時間點能同步的關鍵
  class SeededRNG {
    constructor(seed) { this.seed = seed; }
    // 簡單的線性同餘法
    next() {
      this.seed = (this.seed * 9301 + 49297) % 233280;
      return this.seed / 233280;
    }
    // 從陣列中隨機選一個
    pick(arr) {
      return arr[Math.floor(this.next() * arr.length)];
    }
  }

  // === 生成邏輯 ===
  function generateNews(offsetDays = 0) {
    const now = new Date();
    // 取得當前時間戳記
    const timestamp = now.getTime();
    const dayMs = 86400000;
    
    // 計算目前的區塊ID (每5天一個區塊)
    // 減去 offsetDays 可以讓我們產生「上一期」或「上上期」的新聞
    const blockId = Math.floor((timestamp - (offsetDays * dayMs)) / (UPDATE_INTERVAL_DAYS * dayMs));
    
    // 用這個 blockId 當作種子，保證這5天內產生的內容都一樣
    const rng = new SeededRNG(blockId);

    const station = rng.pick(DB.stations);
    const activity = rng.pick(DB.activities);
    const rawTitle = rng.pick(DB.templates.titles);
    const rawBody = rng.pick(DB.templates.bodies);

    // 計算日期字串 (該區塊的第1天)
    const dateObj = new Date(blockId * UPDATE_INTERVAL_DAYS * dayMs);
    const dateStr = `${dateObj.getFullYear()}-${String(dateObj.getMonth()+1).padStart(2,'0')}-${String(dateObj.getDate()).padStart(2,'0')}`;

    return {
      date: dateStr,
      category: '活動快訊',
      title: rawTitle.replace(/{S}/g, station).replace(/{T}/g, activity),
      body: rawBody.replace(/{S}/g, station).replace(/{T}/g, activity),
      link: 'news.html'
    };
  }

  // === 渲染到頁面 ===
  function render() {
    const container = document.getElementById('auto-news-container');
    if (!container) return;

    let html = '';
    // 產生 NEWS_COUNT 則新聞
    // 第一則是「本期(最近5天)」，第二則是「上期(前5天)」...以此類推
    for (let i = 0; i < NEWS_COUNT; i++) {
      // 每個迴圈往回推一個週期
      const news = generateNews(i * UPDATE_INTERVAL_DAYS);
      
      html += `
        <article class="card">
          <small class="meta" style="color:#e67e22;">${news.category}｜${news.date}</small>
          <h3>${news.title}</h3>
          <p>${news.body}</p>
          <a href="${news.link}" class="btn btn-outline">查看詳情</a>
        </article>
      `;
    }
    container.innerHTML = html;
  }

  // 啟動
  window.addEventListener('load', render);
})();
</script>
</body>
</html>